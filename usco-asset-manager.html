<link rel="import" href="../polymer/polymer.html"> 

<link rel="import" href="usco-parser-base.html"> 
<link rel="import" href="usco-serializer-base.html"> 

<script src="lib/asset-manager.js"></script>

<polymer-element name="usco-asset-manager">
  <template>
  </template>
  <script>Polymer('usco-asset-manager',{
      storesTimeout:0,
      created:function()
      {
        var AssetManager = require("AssetManager");
        this.assetManager = new AssetManager();
      },
      ready: function() {
      },
      enteredView:function()
      {
        this.super();
      },
      //public api
      addStore:function( storeElement )
      {
        console.log("adding store", storeElement.localName);
      },
      addParser:function( parserElement )
      {
        console.log("adding parser", parserElement.localName);
        var extension = parserElement.localName.split("-").shift();
        this.assetManager.addParser(extension, parserElement.parser );
      },
      addSerializer:function( serializerElement )
      {
        console.log("adding serializer", serializerElement.localName);
      },
      loadResource:function( uri, options )
      {
        this.assetManager.load( uri , options )
      }
    });
  </script>
</polymer-element>
